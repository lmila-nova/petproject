# Petstore API Tests
### Java+Gradle+RestAssured+Allure+Docker

## Рекомендации по запуску тестового фреймворка

1. Выполнить команду:
   >docker-compose up

   в корневой директории проекта.

2. По адресу http://localhost:5252/allure-docker-service-ui/projects/default будет доступен результат прогона тестов.

## Комментарии
1. В Dockerfile описана схема сборки образа приложения с автотестами.
2. В файле docker-compose описаны три сервиса:

   2.1 app - приложение с автотестами;

   2.2 allure - api allure-docker-service;

   2.3 allure-ui - пользовательский интерфейс allure-docker-service.

3. Сервисы allure запускаются только после завершения работы сервиса app.

## Тесты
Тесты валидации кодов ответа и тела ответа реализованы на следующие эндпоинты:
1. Контроллер pet
    > 1.1. GET /pet/findByStatus

    > 1.2. GET /pet/{petId}

    > 1.3  POST /pet/{petId}
2. Контроллер store
    > 2.1  GET  /store/order/{orderId}

    > 2.2 DELETE /store/order/{orderId}
3. Контроллер user
    > 3.1 GET /user/{username}

## Сценарии

### Сценарий №1: Размещение заказа на питомца авторизованным пользователем

Предусловие:   в системе есть пользователь {username} с паролем {password}.
               Пользователь авторизован в системе.
               В системе есть питомец с id = {petId}.
1. Пользователь размещает заказ на питомца {petId} (POST /store/order).
2. В системе отображается заказ на питомца из п.1. (GET /store/order/{orderId})

### Сценарий №2: Добавление питомца авторизованным пользователем
Предусловие: в системе есть пользователь {username} с паролем {password}.
Пользователь авторизован в системе.

1. Пользователь добавляет в систему питомца с id = {petId}
   (POST /pet)
2. Пользователь загружает фото питомца с id = {petId}. (PUT /pet/)
3. В системе отображается питомец с загруженной фотографией. (GET /pet/{petId})

### Сценарий №3: Смена пароля пользователем

Предусловие:в системе есть пользователь {username} с паролем {password}.
Пользователь авторизован в системе.
1. Пользователь меняет пароль на {password2}. (PUT /user/{username})
2. Пользователь успешно авторизуется с помощью логина {username} и пароля {password2}. (GET /user/login)

